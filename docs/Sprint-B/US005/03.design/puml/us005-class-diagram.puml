@startuml
'skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false
skinparam linetype polyline
'skinparam linetype orto

skinparam classAttributeIconSize 0

'left to right direction

class ApplicationSession
{
    + static getInstance()
    + getCurrentSession()
}

class UserSession
{
    + getUserEmail()
}

class Store {
    - Integer id
    - String designation
    - String location
    - String emailAddress
    - String phoneNumber

    + Store(id, designation, \nlocation, emailAddress, \nphoneNumber, registeredBy)
}

class Company {
    - String description
    - addStore(store)
    - validateStore(store)
    + registerStore(id, designation, location, \nemailAddress, phoneNumber)
    '+ saveStore(store)
    + Company(description)
    - getAdministratorByEmail(email)
}

class Repositories {
    - Repositories()
    + getInstance() : Repositories
    + getCompanyRepository()
}

class RegisterStoreController {
    + RegisterStoreController(companyRepository)
    + registerStore(id, designation, location, \nemailAddress, phoneNumber)
    - getAdministratorFromSession()
}

class CompanyRepository{
    +getCompanyByUserEmail(email)
}

class Administrator{
-name
-email
-password
}

Repositories -> Repositories : instance
ApplicationSession -> ApplicationSession : instance

RegisterStoreUI .> RegisterStoreController

RegisterStoreController .> Repositories : repositories

Repositories -> "1" CompanyRepository

RegisterStoreController ..> CompanyRepository : companyRepository
CompanyRepository "1" --> "*" Company : company
ApplicationSession --> "1" UserSession : userSession

RegisterStoreController ..> "1" Company : company
RegisterStoreController ..> ApplicationSession
RegisterStoreController ..> UserSession
Store --> Administrator : registeredBy
Company "1" --> "*" Store : has
Administrator "1" --> "*" Company : administrates



@enduml